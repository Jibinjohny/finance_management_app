<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>PROJECT_DOCUMENTATION</title>
  <style>

html {
color: #1a1a1a;
background-color: #fdfdfd;
}
body {
margin: 0 auto;
max-width: 36em;
padding-left: 50px;
padding-right: 50px;
padding-top: 50px;
padding-bottom: 50px;
hyphens: auto;
overflow-wrap: break-word;
text-rendering: optimizeLegibility;
font-kerning: normal;
}
@media (max-width: 600px) {
body {
font-size: 0.9em;
padding: 12px;
}
h1 {
font-size: 1.8em;
}
}
@media print {
html {
background-color: white;
}
body {
background-color: transparent;
color: black;
font-size: 12pt;
}
p, h2, h3 {
orphans: 3;
widows: 3;
}
h2, h3, h4 {
page-break-after: avoid;
}
}
p {
margin: 1em 0;
}
a {
color: #1a1a1a;
}
a:visited {
color: #1a1a1a;
}
img {
max-width: 100%;
}
svg {
height: auto;
max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
margin-top: 1.4em;
}
h5, h6 {
font-size: 1em;
font-style: italic;
}
h6 {
font-weight: normal;
}
ol, ul {
padding-left: 1.7em;
margin-top: 1em;
}
li > ol, li > ul {
margin-top: 0;
}
blockquote {
margin: 1em 0 1em 1.7em;
padding-left: 1em;
border-left: 2px solid #e6e6e6;
color: #606060;
}
code {
font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
font-size: 85%;
margin: 0;
hyphens: manual;
}
pre {
margin: 1em 0;
overflow: auto;
}
pre code {
padding: 0;
overflow: visible;
overflow-wrap: normal;
}
.sourceCode {
background-color: transparent;
overflow: visible;
}
hr {
border: none;
border-top: 1px solid #1a1a1a;
height: 1px;
margin: 1em 0;
}
table {
margin: 1em 0;
border-collapse: collapse;
width: 100%;
overflow-x: auto;
display: block;
font-variant-numeric: lining-nums tabular-nums;
}
table caption {
margin-bottom: 0.75em;
}
tbody {
margin-top: 0.5em;
border-top: 1px solid #1a1a1a;
border-bottom: 1px solid #1a1a1a;
}
th {
border-top: 1px solid #1a1a1a;
padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
margin-bottom: 4em;
text-align: center;
}
#TOC li {
list-style: none;
}
#TOC ul {
padding-left: 1.3em;
}
#TOC > ul {
padding-left: 0;
}
#TOC a:not(:hover) {
text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#cashflow-app---technical-project-documentation" id="toc-cashflow-app---technical-project-documentation">CashFlow App -
Technical Project Documentation</a>
<ul>
<li><a href="#table-of-contents" id="toc-table-of-contents">Table of
Contents</a></li>
<li><a href="#project-overview" id="toc-project-overview">1. Project
Overview</a>
<ul>
<li><a href="#purpose" id="toc-purpose">1.1 Purpose</a></li>
<li><a href="#target-audience" id="toc-target-audience">1.2 Target
Audience</a></li>
<li><a href="#key-objectives" id="toc-key-objectives">1.3 Key
Objectives</a></li>
</ul></li>
<li><a href="#features-functionality" id="toc-features-functionality">2.
Features &amp; Functionality</a>
<ul>
<li><a href="#authentication-user-management" id="toc-authentication-user-management">2.1 Authentication &amp; User
Management</a></li>
<li><a href="#account-management" id="toc-account-management">2.2
Account Management</a></li>
<li><a href="#transaction-management" id="toc-transaction-management">2.3 Transaction Management</a></li>
<li><a href="#budget-management" id="toc-budget-management">2.4 Budget
Management</a></li>
<li><a href="#financial-goals" id="toc-financial-goals">2.5 Financial
Goals</a></li>
<li><a href="#analytics-insights" id="toc-analytics-insights">2.6
Analytics &amp; Insights</a></li>
<li><a href="#calendar-view" id="toc-calendar-view">2.7 Calendar
View</a></li>
<li><a href="#tags-management" id="toc-tags-management">2.8 Tags
Management</a></li>
<li><a href="#notifications" id="toc-notifications">2.9
Notifications</a></li>
<li><a href="#home-screen-widget-android" id="toc-home-screen-widget-android">2.10 Home Screen Widget
(Android)</a></li>
<li><a href="#additional-features" id="toc-additional-features">2.11
Additional Features</a></li>
</ul></li>
<li><a href="#system-architecture" id="toc-system-architecture">3.
System Architecture</a>
<ul>
<li><a href="#architecture-pattern" id="toc-architecture-pattern">3.1
Architecture Pattern</a></li>
<li><a href="#layer-responsibilities" id="toc-layer-responsibilities">3.2 Layer Responsibilities</a></li>
<li><a href="#data-flow" id="toc-data-flow">3.3 Data Flow</a></li>
<li><a href="#state-management" id="toc-state-management">3.4 State
Management</a></li>
</ul></li>
<li><a href="#database-design" id="toc-database-design">4. Database
Design</a>
<ul>
<li><a href="#database-technology" id="toc-database-technology">4.1
Database Technology</a></li>
<li><a href="#database-schema" id="toc-database-schema">4.2 Database
Schema</a></li>
<li><a href="#database-relationships" id="toc-database-relationships">4.3 Database Relationships</a></li>
<li><a href="#database-migrations" id="toc-database-migrations">4.4
Database Migrations</a></li>
<li><a href="#database-operations" id="toc-database-operations">4.5
Database Operations</a></li>
</ul></li>
<li><a href="#security-implementation" id="toc-security-implementation">5. Security Implementation</a>
<ul>
<li><a href="#authentication-security" id="toc-authentication-security">5.1 Authentication Security</a></li>
<li><a href="#data-security" id="toc-data-security">5.2 Data
Security</a></li>
<li><a href="#input-validation" id="toc-input-validation">5.3 Input
Validation</a></li>
<li><a href="#sql-injection-prevention" id="toc-sql-injection-prevention">5.4 SQL Injection Prevention</a></li>
<li><a href="#permission-management" id="toc-permission-management">5.5
Permission Management</a></li>
<li><a href="#data-privacy" id="toc-data-privacy">5.6 Data
Privacy</a></li>
</ul></li>
<li><a href="#feature-implementation-logic" id="toc-feature-implementation-logic">6. Feature Implementation
Logic</a>
<ul>
<li><a href="#account-balance-calculation" id="toc-account-balance-calculation">6.1 Account Balance
Calculation</a></li>
<li><a href="#net-worth-calculation" id="toc-net-worth-calculation">6.2
Net Worth Calculation</a></li>
<li><a href="#budget-tracking-1" id="toc-budget-tracking-1">6.3 Budget
Tracking</a></li>
<li><a href="#emi-calculation" id="toc-emi-calculation">6.4 EMI
Calculation</a></li>
<li><a href="#recurring-transaction-processing" id="toc-recurring-transaction-processing">6.5 Recurring Transaction
Processing</a></li>
<li><a href="#pdf-report-generation" id="toc-pdf-report-generation">6.6
PDF Report Generation</a></li>
<li><a href="#notification-scheduling" id="toc-notification-scheduling">6.7 Notification Scheduling</a></li>
<li><a href="#home-widget-update" id="toc-home-widget-update">6.8 Home
Widget Update</a></li>
<li><a href="#category-analytics" id="toc-category-analytics">6.9
Category Analytics</a></li>
<li><a href="#search-filter-logic" id="toc-search-filter-logic">6.10
Search &amp; Filter Logic</a></li>
</ul></li>
<li><a href="#technology-stack" id="toc-technology-stack">7. Technology
Stack</a>
<ul>
<li><a href="#core-technologies" id="toc-core-technologies">7.1 Core
Technologies</a></li>
<li><a href="#key-dependencies" id="toc-key-dependencies">7.2 Key
Dependencies</a></li>
<li><a href="#platform-specific" id="toc-platform-specific">7.3
Platform-Specific</a></li>
</ul></li>
<li><a href="#code-structure" id="toc-code-structure">8. Code
Structure</a>
<ul>
<li><a href="#project-organization" id="toc-project-organization">8.1
Project Organization</a></li>
<li><a href="#design-patterns-used" id="toc-design-patterns-used">8.2
Design Patterns Used</a></li>
<li><a href="#naming-conventions" id="toc-naming-conventions">8.3 Naming
Conventions</a></li>
</ul></li>
<li><a href="#testing-strategy" id="toc-testing-strategy">9. Testing
Strategy</a>
<ul>
<li><a href="#unit-tests" id="toc-unit-tests">9.1 Unit Tests</a></li>
<li><a href="#widget-tests" id="toc-widget-tests">9.2 Widget
Tests</a></li>
<li><a href="#integration-tests" id="toc-integration-tests">9.3
Integration Tests</a></li>
<li><a href="#test-files" id="toc-test-files">9.4 Test Files</a></li>
</ul></li>
<li><a href="#future-enhancements" id="toc-future-enhancements">10.
Future Enhancements</a>
<ul>
<li><a href="#security-improvements" id="toc-security-improvements">10.1
Security Improvements</a></li>
<li><a href="#features-1" id="toc-features-1">10.2 Features</a></li>
<li><a href="#uiux" id="toc-uiux">10.3 UI/UX</a></li>
<li><a href="#analytics" id="toc-analytics">10.4 Analytics</a></li>
<li><a href="#platform" id="toc-platform">10.5 Platform</a></li>
<li><a href="#technical" id="toc-technical">10.6 Technical</a></li>
</ul></li>
<li><a href="#appendix" id="toc-appendix">Appendix</a>
<ul>
<li><a href="#a.-glossary" id="toc-a.-glossary">A. Glossary</a></li>
<li><a href="#b.-references" id="toc-b.-references">B.
References</a></li>
<li><a href="#c.-contact-support" id="toc-c.-contact-support">C. Contact
&amp; Support</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="cashflow-app---technical-project-documentation">CashFlow App -
Technical Project Documentation</h1>
<p><strong>Version:</strong> 1.0.0<br />
<strong>Platform:</strong> Flutter (Cross-platform)<br />
<strong>Database:</strong> SQLite (Sqflite)<br />
<strong>State Management:</strong> Provider Pattern<br />
<strong>Date:</strong> November 2025</p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol type="1">
<li><a href="#project-overview">Project Overview</a></li>
<li><a href="#features--functionality">Features &amp;
Functionality</a></li>
<li><a href="#system-architecture">System Architecture</a></li>
<li><a href="#database-design">Database Design</a></li>
<li><a href="#security-implementation">Security Implementation</a></li>
<li><a href="#feature-implementation-logic">Feature Implementation
Logic</a></li>
<li><a href="#technology-stack">Technology Stack</a></li>
<li><a href="#code-structure">Code Structure</a></li>
<li><a href="#testing-strategy">Testing Strategy</a></li>
<li><a href="#future-enhancements">Future Enhancements</a></li>
</ol>
<hr />
<h2 id="project-overview">1. Project Overview</h2>
<h3 id="purpose">1.1 Purpose</h3>
<p>CashFlow is a comprehensive personal finance management application
designed to help users track their income, expenses, and overall
financial health. The application provides real-time insights, budgeting
tools, goal tracking, and detailed financial reports.</p>
<h3 id="target-audience">1.2 Target Audience</h3>
<ul>
<li>Individuals seeking to manage personal finances</li>
<li>Users wanting to track multiple accounts (bank, cash, credit cards,
loans)</li>
<li>People interested in budget planning and financial goal setting</li>
<li>Users requiring detailed financial reports and analytics</li>
</ul>
<h3 id="key-objectives">1.3 Key Objectives</h3>
<ul>
<li>Provide intuitive financial tracking</li>
<li>Enable multi-account management</li>
<li>Offer visual analytics and insights</li>
<li>Support budget and goal planning</li>
<li>Generate comprehensive financial reports</li>
<li>Ensure data privacy and security</li>
</ul>
<hr />
<h2 id="features-functionality">2. Features &amp; Functionality</h2>
<h3 id="authentication-user-management">2.1 Authentication &amp; User
Management</h3>
<h4 id="user-registration"><strong>User Registration</strong></h4>
<ul>
<li><strong>Description:</strong> Secure user account creation with
personal information</li>
<li><strong>Fields:</strong> First Name, Last Name, Username, Password,
Currency Preference</li>
<li><strong>Validation:</strong> Username uniqueness check, password
strength requirements</li>
<li><strong>Implementation:</strong> Hashed password storage (basic
implementation), UUID-based user IDs</li>
</ul>
<h4 id="user-login"><strong>User Login</strong></h4>
<ul>
<li><strong>Description:</strong> Secure authentication system</li>
<li><strong>Features:</strong>
<ul>
<li>Username/password authentication</li>
<li>Auto-login on app restart using SharedPreferences</li>
<li>Session management</li>
</ul></li>
<li><strong>Security:</strong> Credentials validated against encrypted
database</li>
</ul>
<h4 id="profile-management"><strong>Profile Management</strong></h4>
<ul>
<li><strong>Description:</strong> User profile editing and
customization</li>
<li><strong>Editable Fields:</strong> First Name, Last Name, Password,
Currency Symbol</li>
<li><strong>Additional Features:</strong>
<ul>
<li>Data reset functionality</li>
<li>Logout capability</li>
<li>Account deletion</li>
</ul></li>
</ul>
<h3 id="account-management">2.2 Account Management</h3>
<h4 id="multi-account-support"><strong>Multi-Account
Support</strong></h4>
<p>The application supports various account types:</p>
<ol type="1">
<li><strong>Cash Account</strong>
<ul>
<li>Simple balance tracking</li>
<li>No additional fields required</li>
</ul></li>
<li><strong>Savings Account</strong>
<ul>
<li>Bank name</li>
<li>Account number</li>
<li>Balance tracking</li>
</ul></li>
<li><strong>Salary Account</strong>
<ul>
<li>Bank name</li>
<li>Account number</li>
<li>Income tracking</li>
</ul></li>
<li><strong>Current Account</strong>
<ul>
<li>Bank name</li>
<li>Account number</li>
<li>Business transaction tracking</li>
</ul></li>
<li><strong>Credit Card</strong>
<ul>
<li>Bank name</li>
<li>Card number (last 4 digits)</li>
<li>Credit limit tracking</li>
<li>Outstanding balance</li>
</ul></li>
<li><strong>Investment Account</strong>
<ul>
<li>Investment type</li>
<li>Current value</li>
<li>Returns tracking</li>
</ul></li>
<li><strong>Loan Account</strong>
<ul>
<li><strong>Loan Principal:</strong> Original loan amount</li>
<li><strong>Interest Rate:</strong> Annual interest rate</li>
<li><strong>Tenure:</strong> Loan duration in months</li>
<li><strong>EMI Amount:</strong> Monthly installment</li>
<li><strong>EMI Payment Day:</strong> Day of month for payment</li>
<li><strong>EMIs Paid:</strong> Track payment progress</li>
<li><strong>Computed Fields:</strong>
<ul>
<li>Remaining EMIs</li>
<li>Remaining loan balance</li>
<li>Total interest paid</li>
</ul></li>
</ul></li>
</ol>
<h4 id="account-features"><strong>Account Features</strong></h4>
<ul>
<li>Color-coded accounts for easy identification</li>
<li>Custom icons for visual distinction</li>
<li>Real-time balance updates</li>
<li>Account-wise transaction filtering</li>
<li>Edit and delete capabilities</li>
</ul>
<h3 id="transaction-management">2.3 Transaction Management</h3>
<h4 id="transaction-recording"><strong>Transaction
Recording</strong></h4>
<ul>
<li><strong>Types:</strong> Income and Expense</li>
<li><strong>Fields:</strong>
<ul>
<li>Title/Description</li>
<li>Amount</li>
<li>Date</li>
<li>Category</li>
<li>Account association</li>
<li>Tags (multiple)</li>
</ul></li>
<li><strong>Categories:</strong>
<ul>
<li><strong>Income:</strong> Salary, Business, Investments, Gifts,
Other</li>
<li><strong>Expense:</strong> Food, Transport, Shopping, Bills,
Entertainment, Health, Education, Other</li>
</ul></li>
</ul>
<h4 id="transaction-features"><strong>Transaction Features</strong></h4>
<ul>
<li>Multi-step transaction entry form</li>
<li>Account selection with visual cards</li>
<li>Category-based organization</li>
<li>Tag-based filtering</li>
<li>Date-based filtering</li>
<li>Search functionality</li>
<li>Edit and delete capabilities</li>
<li>Bulk operations</li>
</ul>
<h4 id="recurring-transactions"><strong>Recurring
Transactions</strong></h4>
<ul>
<li><strong>Description:</strong> Automate regular income/expenses</li>
<li><strong>Frequency Options:</strong> Daily, Weekly, Monthly,
Yearly</li>
<li><strong>Features:</strong>
<ul>
<li>Auto-add to transactions</li>
<li>Next due date tracking</li>
<li>Category assignment</li>
<li>Account linking</li>
<li>Edit and delete capabilities</li>
</ul></li>
</ul>
<h3 id="budget-management">2.4 Budget Management</h3>
<h4 id="budget-creation"><strong>Budget Creation</strong></h4>
<ul>
<li><strong>Description:</strong> Set spending limits by category</li>
<li><strong>Fields:</strong>
<ul>
<li>Category</li>
<li>Budget amount</li>
<li>Period (Monthly/Yearly)</li>
<li>Start date</li>
</ul></li>
<li><strong>Features:</strong>
<ul>
<li>Category-wise budget allocation</li>
<li>Period-based tracking</li>
<li>Budget vs. actual comparison</li>
<li>Visual progress indicators</li>
<li>Overspending alerts</li>
</ul></li>
</ul>
<h4 id="budget-tracking"><strong>Budget Tracking</strong></h4>
<ul>
<li>Real-time expense tracking against budgets</li>
<li>Visual progress bars</li>
<li>Percentage calculations</li>
<li>Warning indicators for overspending</li>
<li>Historical budget performance</li>
</ul>
<h3 id="financial-goals">2.5 Financial Goals</h3>
<h4 id="goal-setting"><strong>Goal Setting</strong></h4>
<ul>
<li><strong>Description:</strong> Define and track financial
objectives</li>
<li><strong>Fields:</strong>
<ul>
<li>Goal name</li>
<li>Target amount</li>
<li>Current amount</li>
<li>Deadline</li>
<li>Custom icon and color</li>
</ul></li>
<li><strong>Features:</strong>
<ul>
<li>Progress tracking</li>
<li>Visual progress indicators</li>
<li>Deadline reminders</li>
<li>Manual contribution updates</li>
<li>Goal achievement notifications</li>
</ul></li>
</ul>
<h4 id="goal-management"><strong>Goal Management</strong></h4>
<ul>
<li>Add/Edit/Delete goals</li>
<li>Track multiple goals simultaneously</li>
<li>Visual progress representation</li>
<li>Completion percentage calculation</li>
<li>Time remaining display</li>
</ul>
<h3 id="analytics-insights">2.6 Analytics &amp; Insights</h3>
<h4 id="dashboard"><strong>Dashboard</strong></h4>
<ul>
<li><strong>Net Worth Display:</strong>
<ul>
<li>Total balance across all accounts</li>
<li>Daily/Weekly/Monthly/Yearly view toggle</li>
<li>Bar chart visualization</li>
<li>Hide/show functionality for privacy</li>
</ul></li>
<li><strong>Income vs. Expense Analysis:</strong>
<ul>
<li>Current month comparison</li>
<li>Visual pie chart</li>
<li>Percentage breakdown</li>
<li>Trend indicators</li>
</ul></li>
<li><strong>Recent Transactions:</strong>
<ul>
<li>Last 5 transactions</li>
<li>Quick view with amount and category</li>
<li>Account information</li>
<li>Navigation to full transaction list</li>
</ul></li>
<li><strong>Quick Access Cards:</strong>
<ul>
<li>Accounts overview</li>
<li>Statistics</li>
<li>Monthly reports</li>
<li>Goals</li>
<li>Budgets</li>
<li>Recurring transactions</li>
<li>Calendar view</li>
<li>Insights</li>
</ul></li>
</ul>
<h4 id="statistics-screen"><strong>Statistics Screen</strong></h4>
<ul>
<li><strong>Account-wise Breakdown:</strong>
<ul>
<li>Income and expense per account</li>
<li>Line charts for trends</li>
<li>Category distribution</li>
<li>Time-based filtering</li>
</ul></li>
<li><strong>Financial Trends:</strong>
<ul>
<li>Line chart visualization</li>
<li>Monthly income/expense trends</li>
<li>Comparative analysis</li>
<li>Customizable date ranges</li>
</ul></li>
<li><strong>Category Analysis:</strong>
<ul>
<li>Pie chart for expense distribution</li>
<li>Top spending categories</li>
<li>Category-wise totals</li>
<li>Percentage calculations</li>
</ul></li>
</ul>
<h4 id="monthly-reports"><strong>Monthly Reports</strong></h4>
<ul>
<li><strong>Report Generation:</strong>
<ul>
<li>Month-wise financial summary</li>
<li>Total income and expenses</li>
<li>Category breakdown</li>
<li>Transaction list</li>
<li>Account-wise analysis</li>
</ul></li>
<li><strong>PDF Export:</strong>
<ul>
<li>Professional report layout</li>
<li>App branding (logo and name)</li>
<li>Summary cards</li>
<li>Category breakdown with charts</li>
<li>Detailed transaction table</li>
<li>Share functionality</li>
</ul></li>
</ul>
<h3 id="calendar-view">2.7 Calendar View</h3>
<h4 id="transaction-calendar"><strong>Transaction Calendar</strong></h4>
<ul>
<li><strong>Description:</strong> Visual calendar showing
transactions</li>
<li><strong>Features:</strong>
<ul>
<li>Month view with transaction markers</li>
<li>Day-wise transaction list</li>
<li>Income/expense indicators</li>
<li>Quick transaction entry</li>
<li>Date-based filtering</li>
</ul></li>
</ul>
<h3 id="tags-management">2.8 Tags Management</h3>
<h4 id="tag-system"><strong>Tag System</strong></h4>
<ul>
<li><strong>Description:</strong> Organize transactions with custom
tags</li>
<li><strong>Features:</strong>
<ul>
<li>Create custom tags</li>
<li>Color-coded tags</li>
<li>Multiple tags per transaction</li>
<li>Tag-based filtering</li>
<li>Tag management screen</li>
</ul></li>
</ul>
<h3 id="notifications">2.9 Notifications</h3>
<h4 id="notification-types"><strong>Notification Types</strong></h4>
<ol type="1">
<li><strong>EMI Reminders:</strong>
<ul>
<li>Scheduled 2 days before due date</li>
<li>Loan account specific</li>
<li>Amount and date details</li>
<li>Auto-scheduling on loan creation</li>
</ul></li>
<li><strong>Budget Alerts:</strong>
<ul>
<li>Overspending notifications</li>
<li>Budget threshold warnings</li>
</ul></li>
<li><strong>Goal Reminders:</strong>
<ul>
<li>Deadline approaching alerts</li>
<li>Goal achievement notifications</li>
</ul></li>
</ol>
<h4 id="notification-features"><strong>Notification
Features</strong></h4>
<ul>
<li>In-app notification center</li>
<li>Local push notifications</li>
<li>Read/unread status</li>
<li>Notification history</li>
<li>Clear all functionality</li>
</ul>
<h3 id="home-screen-widget-android">2.10 Home Screen Widget
(Android)</h3>
<h4 id="widget-features"><strong>Widget Features</strong></h4>
<ul>
<li><strong>Description:</strong> Quick financial overview on home
screen</li>
<li><strong>Display:</strong>
<ul>
<li>Current month income (green)</li>
<li>Current month expense (red)</li>
<li>Compact table layout</li>
<li>App icon with circular clip</li>
</ul></li>
<li><strong>Updates:</strong> Real-time synchronization with app
data</li>
<li><strong>Interaction:</strong> Tap to open app</li>
</ul>
<h3 id="additional-features">2.11 Additional Features</h3>
<h4 id="faq-section"><strong>FAQ Section</strong></h4>
<ul>
<li>Comprehensive help documentation</li>
<li>Search functionality</li>
<li>Categorized questions</li>
<li>App feature explanations</li>
</ul>
<h4 id="privacy-policy-terms"><strong>Privacy Policy &amp;
Terms</strong></h4>
<ul>
<li>Legal documentation</li>
<li>User agreement</li>
<li>Data handling policies</li>
</ul>
<h4 id="introonboarding"><strong>Intro/Onboarding</strong></h4>
<ul>
<li>Welcome screens for new users</li>
<li>Feature highlights</li>
<li>App navigation guide</li>
</ul>
<hr />
<h2 id="system-architecture">3. System Architecture</h2>
<h3 id="architecture-pattern">3.1 Architecture Pattern</h3>
<p><strong>Pattern:</strong> Model-View-Provider (MVP) with Clean
Architecture principles</p>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                        Presentation Layer                    │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ Screens  │  │ Widgets  │  │  Utils   │  │  Themes  │   │
│  └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘   │
│       │             │              │             │          │
└───────┼─────────────┼──────────────┼─────────────┼──────────┘
        │             │              │             │
┌───────┼─────────────┼──────────────┼─────────────┼──────────┐
│       ▼             ▼              ▼             ▼          │
│                    Business Logic Layer                     │
│  ┌────────────────────────────────────────────────────┐    │
│  │              Provider Classes                       │    │
│  │  (State Management &amp; Business Logic)               │    │
│  │  - AuthProvider                                     │    │
│  │  - TransactionProvider                              │    │
│  │  - AccountProvider                                  │    │
│  │  - BudgetProvider                                   │    │
│  │  - GoalProvider                                     │    │
│  │  - NotificationProvider                             │    │
│  │  - RecurringTransactionProvider                     │    │
│  │  - TagProvider                                      │    │
│  │  - InsightsProvider                                 │    │
│  └────────────────────┬───────────────────────────────┘    │
└───────────────────────┼────────────────────────────────────┘
                        │
┌───────────────────────┼────────────────────────────────────┐
│                       ▼                                     │
│                  Data Layer                                 │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐    │
│  │   Models     │  │   Services   │  │   Database   │    │
│  │              │  │              │  │              │    │
│  │ - User       │  │ - Database   │  │   SQLite     │    │
│  │ - Account    │  │   Helper     │  │  (Sqflite)   │    │
│  │ - Transaction│  │ - PDF        │  │              │    │
│  │ - Budget     │  │   Service    │  │              │    │
│  │ - Goal       │  │ - Notification│  │              │    │
│  │ - Tag        │  │   Service    │  │              │    │
│  │ - Recurring  │  │ - HomeWidget │  │              │    │
│  │   Transaction│  │   Service    │  │              │    │
│  │ - Notification│ │              │  │              │    │
│  └──────────────┘  └──────────────┘  └──────────────┘    │
└─────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="layer-responsibilities">3.2 Layer Responsibilities</h3>
<h4 id="presentation-layer"><strong>Presentation Layer</strong></h4>
<ul>
<li><strong>Screens:</strong> UI components and user interaction</li>
<li><strong>Widgets:</strong> Reusable UI components</li>
<li><strong>Utils:</strong> Helper functions and utilities</li>
<li><strong>Themes:</strong> Styling and design system</li>
</ul>
<h4 id="business-logic-layer-providers"><strong>Business Logic Layer
(Providers)</strong></h4>
<ul>
<li>State management using Provider pattern</li>
<li>Business rule enforcement</li>
<li>Data validation</li>
<li>CRUD operations coordination</li>
<li>Cross-cutting concerns</li>
</ul>
<h4 id="data-layer"><strong>Data Layer</strong></h4>
<ul>
<li><strong>Models:</strong> Data structures and entities</li>
<li><strong>Services:</strong> External integrations and utilities</li>
<li><strong>Database:</strong> Data persistence and retrieval</li>
</ul>
<h3 id="data-flow">3.3 Data Flow</h3>
<pre><code>User Interaction → Screen → Provider → Service/Database → Provider → Screen → UI Update</code></pre>
<p><strong>Example: Adding a Transaction</strong> 1. User fills
transaction form in <code>AddTransactionScreen</code> 2. Form validation
in UI layer 3. User submits → calls
<code>TransactionProvider.addTransaction()</code> 4. Provider validates
business rules 5. Provider calls <code>DatabaseHelper</code> to insert
data 6. Database returns success/failure 7. Provider updates state and
notifies listeners 8. UI rebuilds with updated data 9. Navigation back
to previous screen</p>
<h3 id="state-management">3.4 State Management</h3>
<p><strong>Provider Pattern Implementation:</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Provider setup in main.dart</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>MultiProvider(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  providers<span class="op">:</span> [</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    ChangeNotifierProvider(create<span class="op">:</span> (_) <span class="op">=&gt;</span> AuthProvider())<span class="op">,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    ChangeNotifierProvider(create<span class="op">:</span> (_) <span class="op">=&gt;</span> AccountProvider())<span class="op">,</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    ChangeNotifierProvider(create<span class="op">:</span> (_) <span class="op">=&gt;</span> TransactionProvider())<span class="op">,</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    ChangeNotifierProvider(create<span class="op">:</span> (_) <span class="op">=&gt;</span> BudgetProvider())<span class="op">,</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    ChangeNotifierProvider(create<span class="op">:</span> (_) <span class="op">=&gt;</span> GoalProvider())<span class="op">,</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    ChangeNotifierProvider(create<span class="op">:</span> (_) <span class="op">=&gt;</span> NotificationProvider())<span class="op">,</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    ChangeNotifierProvider(create<span class="op">:</span> (_) <span class="op">=&gt;</span> RecurringTransactionProvider())<span class="op">,</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    ChangeNotifierProvider(create<span class="op">:</span> (_) <span class="op">=&gt;</span> TagProvider())<span class="op">,</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>    ChangeNotifierProvider(create<span class="op">:</span> (_) <span class="op">=&gt;</span> InsightsProvider())<span class="op">,</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  child<span class="op">:</span> MyApp()<span class="op">,</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Key Benefits:</strong> - Centralized state management -
Reactive UI updates - Separation of concerns - Testability -
Scalability</p>
<hr />
<h2 id="database-design">4. Database Design</h2>
<h3 id="database-technology">4.1 Database Technology</h3>
<ul>
<li><strong>Engine:</strong> SQLite</li>
<li><strong>Package:</strong> Sqflite (Flutter SQLite plugin)</li>
<li><strong>Version:</strong> 9 (current schema version)</li>
<li><strong>Location:</strong> Local device storage</li>
<li><strong>File:</strong> <code>cashflow_v4.db</code></li>
</ul>
<h3 id="database-schema">4.2 Database Schema</h3>
<h4 id="table-users"><strong>Table: users</strong></h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> users (</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">id</span> TEXT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  firstName TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  lastName TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  username TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">password</span> TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  currency TEXT <span class="kw">DEFAULT</span> <span class="st">&#39;₹&#39;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Purpose:</strong> Store user account information<br />
<strong>Key Fields:</strong> - <code>id</code>: UUID primary key -
<code>username</code>: Unique identifier for login -
<code>password</code>: User password (stored as plain text - see
security notes) - <code>currency</code>: User’s preferred currency
symbol</p>
<hr />
<h4 id="table-accounts"><strong>Table: accounts</strong></h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> accounts (</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">id</span> TEXT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  name TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">type</span> TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  balance <span class="dt">REAL</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  color <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  icon <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  bankName TEXT,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  accountNumber TEXT,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  loanPrincipal <span class="dt">REAL</span>,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  loanInterestRate <span class="dt">REAL</span>,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  loanTenureMonths <span class="dt">INTEGER</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  loanStartDate TEXT,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  emiAmount <span class="dt">REAL</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  emisPaid <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  emiPaymentDay <span class="dt">INTEGER</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Purpose:</strong> Store all account types (cash, bank, credit
card, loan, etc.)<br />
<strong>Key Fields:</strong> - <code>type</code>: Account type enum
(CASH, SAVINGS, SALARY, CURRENT, CREDITCARD, BANK, INVESTMENT, LOAN,
OTHER) - <code>balance</code>: Current account balance -
<code>color</code>: Color code for UI display - <code>icon</code>: Icon
code for UI display - Loan-specific fields for EMI calculation and
tracking</p>
<hr />
<h4 id="table-transactions"><strong>Table: transactions</strong></h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> transactions (</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">id</span> TEXT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  title TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  amount <span class="dt">REAL</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">date</span> TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  isExpense <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">category</span> TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  userId TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  accountId TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  tags TEXT,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (userId) <span class="kw">REFERENCES</span> users (<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (accountId) <span class="kw">REFERENCES</span> accounts (<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Purpose:</strong> Store all financial transactions<br />
<strong>Key Fields:</strong> - <code>isExpense</code>: Boolean (1 for
expense, 0 for income) - <code>category</code>: Transaction category -
<code>tags</code>: Comma-separated tag IDs - Foreign keys ensure
referential integrity</p>
<hr />
<h4 id="table-budgets"><strong>Table: budgets</strong></h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> budgets (</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">id</span> TEXT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">category</span> TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  amount <span class="dt">REAL</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  period TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  startDate TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  userId TEXT <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Purpose:</strong> Store user-defined budgets<br />
<strong>Key Fields:</strong> - <code>period</code>: ‘monthly’ or
‘yearly’ - <code>amount</code>: Budget limit - <code>category</code>:
Budget category</p>
<hr />
<h4 id="table-goals"><strong>Table: goals</strong></h4>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> goals (</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">id</span> TEXT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  name TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  targetAmount <span class="dt">REAL</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  currentAmount <span class="dt">REAL</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  deadline TEXT,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  icon <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  color <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  userId TEXT <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Purpose:</strong> Store financial goals<br />
<strong>Key Fields:</strong> - <code>targetAmount</code>: Goal target -
<code>currentAmount</code>: Current progress - <code>deadline</code>:
Optional deadline date</p>
<hr />
<h4 id="table-recurring_transactions"><strong>Table:
recurring_transactions</strong></h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> recurring_transactions (</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">id</span> TEXT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  title TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  amount <span class="dt">REAL</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">category</span> TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  frequency TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  nextDueDate TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  isAutoAdd <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  accountId TEXT,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  userId TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  isExpense <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Purpose:</strong> Store recurring transaction templates<br />
<strong>Key Fields:</strong> - <code>frequency</code>: ‘daily’,
‘weekly’, ‘monthly’, ‘yearly’ - <code>isAutoAdd</code>: Auto-create
transactions - <code>nextDueDate</code>: Next occurrence date</p>
<hr />
<h4 id="table-notifications"><strong>Table: notifications</strong></h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> notifications (</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">id</span> TEXT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  title TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  message TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">timestamp</span> TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  isRead <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  userId TEXT <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Purpose:</strong> Store in-app notifications<br />
<strong>Key Fields:</strong> - <code>isRead</code>: Read status -
<code>timestamp</code>: Notification creation time</p>
<hr />
<h4 id="table-tags"><strong>Table: tags</strong></h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> tags (</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">id</span> TEXT <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  name TEXT <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  color <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  userId TEXT <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p><strong>Purpose:</strong> Store custom transaction tags<br />
<strong>Key Fields:</strong> - <code>name</code>: Tag name -
<code>color</code>: Tag color for UI</p>
<h3 id="database-relationships">4.3 Database Relationships</h3>
<pre><code>users (1) ──────&lt; (N) transactions
users (1) ──────&lt; (N) budgets
users (1) ──────&lt; (N) goals
users (1) ──────&lt; (N) recurring_transactions
users (1) ──────&lt; (N) notifications
users (1) ──────&lt; (N) tags

accounts (1) ────&lt; (N) transactions
accounts (1) ────&lt; (N) recurring_transactions</code></pre>
<h3 id="database-migrations">4.4 Database Migrations</h3>
<p>The application uses version-based migrations:</p>
<p><strong>Version History:</strong> - <strong>v1:</strong> Initial
schema (users, transactions) - <strong>v2:</strong> Added notifications
table - <strong>v3:</strong> Added accounts table, linked to
transactions - <strong>v4:</strong> Added loan-specific fields to
accounts - <strong>v5:</strong> Added EMI payment day field -
<strong>v6:</strong> Added budgets, goals, recurring_transactions, tags
- <strong>v7:</strong> Added isExpense to recurring_transactions -
<strong>v8:</strong> Created tags table - <strong>v9:</strong> Added
currency to users table</p>
<p><strong>Migration Strategy:</strong> - Incremental schema updates -
Data preservation during upgrades - Default value handling - Backward
compatibility</p>
<h3 id="database-operations">4.5 Database Operations</h3>
<p><strong>Singleton Pattern:</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> DatabaseHelper <span class="op">{</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">static</span> <span class="at">final</span> DatabaseHelper instance <span class="op">=</span> DatabaseHelper<span class="op">.</span>_init();</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">static</span> Database<span class="op">?</span> _database;</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Key Operations:</strong> - <code>_initDB()</code>: Initialize
database connection - <code>_createDB()</code>: Create initial schema -
<code>_onUpgrade()</code>: Handle version migrations -
<code>close()</code>: Close database connection -
<code>deleteDB()</code>: Delete database file</p>
<hr />
<h2 id="security-implementation">5. Security Implementation</h2>
<h3 id="authentication-security">5.1 Authentication Security</h3>
<h4 id="current-implementation"><strong>Current
Implementation</strong></h4>
<ul>
<li><strong>Username/Password:</strong> Basic authentication</li>
<li><strong>Password Storage:</strong> Plain text in SQLite
database</li>
<li><strong>Session Management:</strong> SharedPreferences for user ID
storage</li>
<li><strong>Auto-login:</strong> Based on stored user ID</li>
</ul>
<blockquote>
<p><strong>⚠️ SECURITY NOTE:</strong><br />
The current implementation stores passwords in plain text, which is
<strong>NOT RECOMMENDED</strong> for production applications.</p>
</blockquote>
<h4 id="recommended-security-enhancements"><strong>Recommended Security
Enhancements</strong></h4>
<ol type="1">
<li><p><strong>Password Hashing:</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Use bcrypt or similar</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="st">&#39;package:bcrypt/bcrypt.dart&#39;</span>;</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="dt">String</span> hashedPassword <span class="op">=</span> BCrypt<span class="op">.</span>hashpw(password<span class="op">,</span> BCrypt<span class="op">.</span>gensalt());</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="dt">bool</span> isValid <span class="op">=</span> BCrypt<span class="op">.</span>checkpw(password<span class="op">,</span> hashedPassword);</span></code></pre></div></li>
<li><p><strong>Secure Storage:</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Use flutter_secure_storage</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="st">&#39;package:flutter_secure_storage/flutter_secure_storage.dart&#39;</span>;</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="at">final</span> storage <span class="op">=</span> FlutterSecureStorage();</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="at">await</span> storage<span class="op">.</span>write(key<span class="op">:</span> <span class="st">&#39;userId&#39;</span><span class="op">,</span> value<span class="op">:</span> userId);</span></code></pre></div></li>
<li><p><strong>Token-based Authentication:</strong></p>
<ul>
<li>Implement JWT tokens</li>
<li>Refresh token mechanism</li>
<li>Token expiration handling</li>
</ul></li>
</ol>
<h3 id="data-security">5.2 Data Security</h3>
<h4 id="local-data-protection"><strong>Local Data
Protection</strong></h4>
<ul>
<li><strong>SQLite Encryption:</strong> Not currently implemented</li>
<li><strong>Data Location:</strong> App-specific directory
(sandboxed)</li>
<li><strong>Access Control:</strong> OS-level app sandboxing</li>
</ul>
<h4 id="recommended-enhancements"><strong>Recommended
Enhancements</strong></h4>
<ol type="1">
<li><p><strong>Database Encryption:</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Use sqlcipher_flutter_libs</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="st">&#39;package:sqlcipher_flutter_libs/sqlcipher_flutter_libs.dart&#39;</span>;</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="at">await</span> openDatabase(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  path<span class="op">,</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  password<span class="op">:</span> userPassword<span class="op">,</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  version<span class="op">:</span> <span class="dv">9</span><span class="op">,</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div></li>
<li><p><strong>Sensitive Data Encryption:</strong></p>
<ul>
<li>Encrypt account numbers</li>
<li>Encrypt financial amounts</li>
<li>Use AES-256 encryption</li>
</ul></li>
</ol>
<h3 id="input-validation">5.3 Input Validation</h3>
<h4 id="current-implementation-1"><strong>Current
Implementation</strong></h4>
<ul>
<li>Form field validation</li>
<li>Data type checking</li>
<li>Required field validation</li>
<li>Format validation (dates, amounts)</li>
</ul>
<h4 id="validation-examples"><strong>Validation Examples</strong></h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Amount validation</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (amount <span class="op">&lt;=</span> <span class="dv">0</span>) <span class="op">{</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> <span class="st">&#39;Amount must be greater than 0&#39;</span>;</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Username validation</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (username<span class="op">.</span>isEmpty <span class="op">||</span> username<span class="op">.</span>length <span class="op">&lt;</span> <span class="dv">3</span>) <span class="op">{</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> <span class="st">&#39;Username must be at least 3 characters&#39;</span>;</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Date validation</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (selectedDate<span class="op">.</span>isAfter(DateTime<span class="op">.</span>now())) <span class="op">{</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> <span class="st">&#39;Date cannot be in the future&#39;</span>;</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="sql-injection-prevention">5.4 SQL Injection Prevention</h3>
<p><strong>Parameterized Queries:</strong></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Safe query using parameterized statements</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="at">await</span> db<span class="op">.</span>query(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;users&#39;</span><span class="op">,</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  where<span class="op">:</span> <span class="st">&#39;username = ? AND password = ?&#39;</span><span class="op">,</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  whereArgs<span class="op">:</span> [username<span class="op">,</span> password]<span class="op">,</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Avoid string concatenation</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">// BAD: &quot;SELECT * FROM users WHERE username = &#39;$username&#39;&quot;</span></span></code></pre></div>
<h3 id="permission-management">5.5 Permission Management</h3>
<h4 id="android-permissions"><strong>Android Permissions</strong></h4>
<ul>
<li><strong>Notifications:</strong> Runtime permission request</li>
<li><strong>Storage:</strong> Scoped storage (Android 10+)</li>
<li><strong>Internet:</strong> Not required (offline app)</li>
</ul>
<h4 id="ios-permissions"><strong>iOS Permissions</strong></h4>
<ul>
<li><strong>Notifications:</strong> User consent required</li>
<li><strong>Local Storage:</strong> App sandbox</li>
</ul>
<h3 id="data-privacy">5.6 Data Privacy</h3>
<h4 id="privacy-features"><strong>Privacy Features</strong></h4>
<ul>
<li><strong>Local-only Storage:</strong> No cloud sync</li>
<li><strong>No Analytics:</strong> No user tracking</li>
<li><strong>No Third-party Services:</strong> Complete offline
operation</li>
<li><strong>Data Export:</strong> User owns their data</li>
<li><strong>Data Deletion:</strong> Complete data reset option</li>
</ul>
<h4 id="gdpr-compliance-considerations"><strong>GDPR Compliance
Considerations</strong></h4>
<ul>
<li>User consent for data collection</li>
<li>Right to data portability (PDF export)</li>
<li>Right to erasure (reset data feature)</li>
<li>Data minimization (only essential data collected)</li>
</ul>
<hr />
<h2 id="feature-implementation-logic">6. Feature Implementation
Logic</h2>
<h3 id="account-balance-calculation">6.1 Account Balance
Calculation</h3>
<p><strong>Logic:</strong></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Real-time balance update on transaction</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Future</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> _updateAccountBalance(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">String</span> accountId<span class="op">,</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> amount<span class="op">,</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bool</span> isExpense<span class="op">,</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>) <span class="at">async</span> <span class="op">{</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> account <span class="op">=</span> <span class="at">await</span> getAccountById(accountId);</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> newBalance <span class="op">=</span> isExpense</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> account<span class="op">.</span>balance <span class="op">-</span> amount</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> account<span class="op">.</span>balance <span class="op">+</span> amount;</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">await</span> updateAccount(account<span class="op">.</span>copyWith(balance<span class="op">:</span> newBalance));</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Considerations:</strong> - Atomic operations to prevent race
conditions - Transaction rollback on failure - Balance validation
(prevent negative for certain account types)</p>
<h3 id="net-worth-calculation">6.2 Net Worth Calculation</h3>
<p><strong>Logic:</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculateNetWorth(<span class="dt">List</span><span class="op">&lt;</span>Account<span class="op">&gt;</span> accounts) <span class="op">{</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> accounts<span class="op">.</span>fold(<span class="fl">0.0</span><span class="op">,</span> (sum<span class="op">,</span> account) <span class="op">{</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (account<span class="op">.</span>type <span class="op">==</span> AccountType<span class="op">.</span>loan) <span class="op">{</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Loans are liabilities (negative)</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> sum <span class="op">-</span> account<span class="op">.</span>remainingLoanBalance;</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> (account<span class="op">.</span>type <span class="op">==</span> AccountType<span class="op">.</span>creditCard) <span class="op">{</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Credit cards: negative balance = liability</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> sum <span class="op">+</span> account<span class="op">.</span>balance;</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Regular accounts: positive balance</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> sum <span class="op">+</span> account<span class="op">.</span>balance;</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span>);</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Time-based Filtering:</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">List</span><span class="op">&lt;</span>Transaction<span class="op">&gt;</span> getTransactionsForPeriod(</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  DateTime start<span class="op">,</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  DateTime end<span class="op">,</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">{</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> transactions<span class="op">.</span>where((t) <span class="op">=&gt;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    t<span class="op">.</span>date<span class="op">.</span>isAfter(start) <span class="op">&amp;&amp;</span> t<span class="op">.</span>date<span class="op">.</span>isBefore(end)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  )<span class="op">.</span>toList();</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="budget-tracking-1">6.3 Budget Tracking</h3>
<p><strong>Logic:</strong></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculateBudgetUsage(Budget budget) <span class="op">{</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> startDate <span class="op">=</span> budget<span class="op">.</span>startDate;</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> endDate <span class="op">=</span> budget<span class="op">.</span>period <span class="op">==</span> <span class="st">&#39;monthly&#39;</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> DateTime(startDate<span class="op">.</span>year<span class="op">,</span> startDate<span class="op">.</span>month <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> startDate<span class="op">.</span>day)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> DateTime(startDate<span class="op">.</span>year <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> startDate<span class="op">.</span>month<span class="op">,</span> startDate<span class="op">.</span>day);</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> expenses <span class="op">=</span> transactions</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span>where((t) <span class="op">=&gt;</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>          t<span class="op">.</span>isExpense <span class="op">&amp;&amp;</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>          t<span class="op">.</span>category <span class="op">==</span> budget<span class="op">.</span>category <span class="op">&amp;&amp;</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>          t<span class="op">.</span>date<span class="op">.</span>isAfter(startDate) <span class="op">&amp;&amp;</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>          t<span class="op">.</span>date<span class="op">.</span>isBefore(endDate))</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span>fold(<span class="fl">0.0</span><span class="op">,</span> (sum<span class="op">,</span> t) <span class="op">=&gt;</span> sum <span class="op">+</span> t<span class="op">.</span>amount);</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> (expenses <span class="op">/</span> budget<span class="op">.</span>amount) <span class="op">*</span> <span class="dv">100</span>; <span class="co">// Percentage</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Overspending Detection:</strong></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (budgetUsage <span class="op">&gt;</span> <span class="dv">100</span>) <span class="op">{</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Trigger notification</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">await</span> notificationProvider<span class="op">.</span>addNotification(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    AppNotification(</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>      title<span class="op">:</span> <span class="st">&#39;Budget Exceeded&#39;</span><span class="op">,</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>      message<span class="op">:</span> <span class="st">&#39;You have exceeded your ${budget.category} budget&#39;</span><span class="op">,</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="emi-calculation">6.4 EMI Calculation</h3>
<p><strong>Logic:</strong></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculateEMI(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> principal<span class="op">,</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">double</span> annualRate<span class="op">,</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> tenureMonths<span class="op">,</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>) <span class="op">{</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> monthlyRate <span class="op">=</span> annualRate <span class="op">/</span> <span class="dv">12</span> <span class="op">/</span> <span class="dv">100</span>;</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> emi <span class="op">=</span> principal <span class="op">*</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>      monthlyRate <span class="op">*</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>      pow(<span class="dv">1</span> <span class="op">+</span> monthlyRate<span class="op">,</span> tenureMonths) <span class="op">/</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>      (pow(<span class="dv">1</span> <span class="op">+</span> monthlyRate<span class="op">,</span> tenureMonths) <span class="op">-</span> <span class="dv">1</span>);</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> emi;</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Remaining Balance:</strong></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> <span class="kw">get</span> remainingLoanBalance <span class="op">{</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> pending <span class="op">=</span> emisPending;</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> pending <span class="op">*</span> emiAmount<span class="op">!</span>;</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="kw">get</span> emisPending <span class="op">{</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> loanTenureMonths<span class="op">!</span> <span class="op">-</span> (emisPaid <span class="op">??</span> <span class="dv">0</span>);</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Interest Calculation:</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> <span class="kw">get</span> totalInterestPaid <span class="op">{</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> paid <span class="op">=</span> emisPaid <span class="op">??</span> <span class="dv">0</span>;</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> totalPaid <span class="op">=</span> paid <span class="op">*</span> emiAmount<span class="op">!</span>;</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> principalPaid <span class="op">=</span> loanPrincipal<span class="op">!</span> <span class="op">-</span> remainingLoanBalance;</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> totalPaid <span class="op">-</span> principalPaid;</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="recurring-transaction-processing">6.5 Recurring Transaction
Processing</h3>
<p><strong>Auto-add Logic:</strong></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Future</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> processRecurringTransactions() <span class="at">async</span> <span class="op">{</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> recurring <span class="op">=</span> <span class="at">await</span> getAllRecurringTransactions();</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> now <span class="op">=</span> DateTime<span class="op">.</span>now();</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="at">final</span> rt <span class="kw">in</span> recurring) <span class="op">{</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (rt<span class="op">.</span>isAutoAdd <span class="op">&amp;&amp;</span> rt<span class="op">.</span>nextDueDate<span class="op">.</span>isBefore(now)) <span class="op">{</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Create transaction</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">await</span> addTransaction(Transaction(</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>        id<span class="op">:</span> Uuid()<span class="op">.</span>v4()<span class="op">,</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>        title<span class="op">:</span> rt<span class="op">.</span>title<span class="op">,</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>        amount<span class="op">:</span> rt<span class="op">.</span>amount<span class="op">,</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>        category<span class="op">:</span> rt<span class="op">.</span>category<span class="op">,</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>        date<span class="op">:</span> rt<span class="op">.</span>nextDueDate<span class="op">,</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>        isExpense<span class="op">:</span> rt<span class="op">.</span>isExpense<span class="op">,</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>        accountId<span class="op">:</span> rt<span class="op">.</span>accountId<span class="op">,</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>        userId<span class="op">:</span> rt<span class="op">.</span>userId<span class="op">,</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>      ));</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Update next due date</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">final</span> nextDate <span class="op">=</span> _calculateNextDate(</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>        rt<span class="op">.</span>nextDueDate<span class="op">,</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>        rt<span class="op">.</span>frequency<span class="op">,</span></span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>      );</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>      <span class="at">await</span> updateRecurringTransaction(</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>        rt<span class="op">.</span>copyWith(nextDueDate<span class="op">:</span> nextDate)<span class="op">,</span></span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>      );</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Frequency Calculation:</strong></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>DateTime _calculateNextDate(DateTime current<span class="op">,</span> <span class="dt">String</span> frequency) <span class="op">{</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span> (frequency) <span class="op">{</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&#39;daily&#39;</span><span class="op">:</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> current<span class="op">.</span>add(Duration(days<span class="op">:</span> <span class="dv">1</span>));</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&#39;weekly&#39;</span><span class="op">:</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> current<span class="op">.</span>add(Duration(days<span class="op">:</span> <span class="dv">7</span>));</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&#39;monthly&#39;</span><span class="op">:</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> DateTime(current<span class="op">.</span>year<span class="op">,</span> current<span class="op">.</span>month <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> current<span class="op">.</span>day);</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="st">&#39;yearly&#39;</span><span class="op">:</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> DateTime(current<span class="op">.</span>year <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> current<span class="op">.</span>month<span class="op">,</span> current<span class="op">.</span>day);</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>      <span class="kw">return</span> current;</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="pdf-report-generation">6.6 PDF Report Generation</h3>
<p><strong>Report Structure:</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Future</span><span class="op">&lt;</span>pw<span class="op">.</span>Document<span class="op">&gt;</span> generateMonthlyReport(<span class="op">{</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  required <span class="dt">String</span> monthYear<span class="op">,</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  required <span class="dt">double</span> totalIncome<span class="op">,</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  required <span class="dt">double</span> totalExpense<span class="op">,</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  required <span class="dt">List</span><span class="op">&lt;</span>Transaction<span class="op">&gt;</span> transactions<span class="op">,</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  required <span class="dt">Map</span><span class="op">&lt;</span><span class="dt">String</span><span class="op">,</span> <span class="dt">double</span><span class="op">&gt;</span> categoryExpenses<span class="op">,</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>) <span class="at">async</span> <span class="op">{</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> pdf <span class="op">=</span> pw<span class="op">.</span>Document();</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  pdf<span class="op">.</span>addPage(</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    pw<span class="op">.</span>MultiPage(</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>      build<span class="op">:</span> (context) <span class="op">=&gt;</span> [</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        _buildHeader(monthYear)<span class="op">,</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>        _buildSummaryCards(totalIncome<span class="op">,</span> totalExpense)<span class="op">,</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>        _buildCategoryBreakdown(categoryExpenses)<span class="op">,</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        _buildTransactionTable(transactions)<span class="op">,</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>      ]<span class="op">,</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    )<span class="op">,</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> pdf;</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Components:</strong> 1. <strong>Header:</strong> App
branding, month/year 2. <strong>Summary Cards:</strong> Income, expense,
net savings 3. <strong>Category Breakdown:</strong> Pie chart,
percentages 4. <strong>Transaction Table:</strong> Detailed list with
dates, categories, amounts</p>
<h3 id="notification-scheduling">6.7 Notification Scheduling</h3>
<p><strong>EMI Reminder Logic:</strong></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Future</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> scheduleEmiReminder(Account account) <span class="at">async</span> <span class="op">{</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> nextEmiDate <span class="op">=</span> _getNextEmiDate(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    DateTime<span class="op">.</span>now()<span class="op">,</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    account<span class="op">.</span>emiPaymentDay<span class="op">!,</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Schedule 2 days before</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> reminderDate <span class="op">=</span> nextEmiDate<span class="op">.</span>subtract(Duration(days<span class="op">:</span> <span class="dv">2</span>));</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">await</span> _notifications<span class="op">.</span>zonedSchedule(</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    account<span class="op">.</span>id<span class="op">.</span>hashCode<span class="op">,</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;EMI Payment Reminder&#39;</span><span class="op">,</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;EMI of ${account.emiAmount} for ${account.name} due on ${nextEmiDate}&#39;</span><span class="op">,</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    tz<span class="op">.</span>TZDateTime<span class="op">.</span>from(reminderDate<span class="op">,</span> tz<span class="op">.</span>local)<span class="op">,</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    notificationDetails<span class="op">,</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>    androidScheduleMode<span class="op">:</span> AndroidScheduleMode<span class="op">.</span>exactAllowWhileIdle<span class="op">,</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Next EMI Date Calculation:</strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>DateTime _getNextEmiDate(DateTime now<span class="op">,</span> <span class="dt">int</span> dayOfMonth) <span class="op">{</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">var</span> nextDate <span class="op">=</span> DateTime(now<span class="op">.</span>year<span class="op">,</span> now<span class="op">.</span>month<span class="op">,</span> dayOfMonth);</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (nextDate<span class="op">.</span>isBefore(now)) <span class="op">{</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    nextDate <span class="op">=</span> DateTime(now<span class="op">.</span>year<span class="op">,</span> now<span class="op">.</span>month <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> dayOfMonth);</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Handle months with fewer days</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> (nextDate<span class="op">.</span>day <span class="op">!=</span> dayOfMonth) <span class="op">{</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    nextDate <span class="op">=</span> nextDate<span class="op">.</span>subtract(Duration(days<span class="op">:</span> <span class="dv">1</span>));</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> nextDate;</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="home-widget-update">6.8 Home Widget Update</h3>
<p><strong>Widget Data Sync:</strong></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Future</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> updateHomeWidget() <span class="at">async</span> <span class="op">{</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> currentMonth <span class="op">=</span> DateTime<span class="op">.</span>now();</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> income <span class="op">=</span> <span class="at">await</span> getMonthlyIncome(currentMonth);</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> expense <span class="op">=</span> <span class="at">await</span> getMonthlyExpense(currentMonth);</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">await</span> HomeWidget<span class="op">.</span>saveWidgetData<span class="op">&lt;</span><span class="dt">double</span><span class="op">&gt;</span>(<span class="st">&#39;income&#39;</span><span class="op">,</span> income);</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">await</span> HomeWidget<span class="op">.</span>saveWidgetData<span class="op">&lt;</span><span class="dt">double</span><span class="op">&gt;</span>(<span class="st">&#39;expense&#39;</span><span class="op">,</span> expense);</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">await</span> HomeWidget<span class="op">.</span>updateWidget(</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    name<span class="op">:</span> <span class="st">&#39;CashFlowWidgetProvider&#39;</span><span class="op">,</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    androidName<span class="op">:</span> <span class="st">&#39;CashFlowWidgetProvider&#39;</span><span class="op">,</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Trigger Points:</strong> - Transaction added/edited/deleted -
Account balance updated - App launched - Manual refresh</p>
<h3 id="category-analytics">6.9 Category Analytics</h3>
<p><strong>Expense Distribution:</strong></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="dt">Map</span><span class="op">&lt;</span><span class="dt">String</span><span class="op">,</span> <span class="dt">double</span><span class="op">&gt;</span> calculateCategoryExpenses(</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">List</span><span class="op">&lt;</span>Transaction<span class="op">&gt;</span> transactions<span class="op">,</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>) <span class="op">{</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> <span class="dt">Map</span><span class="op">&lt;</span><span class="dt">String</span><span class="op">,</span> <span class="dt">double</span><span class="op">&gt;</span> categoryTotals <span class="op">=</span> <span class="op">{}</span>;</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="at">final</span> transaction <span class="kw">in</span> transactions) <span class="op">{</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (transaction<span class="op">.</span>isExpense) <span class="op">{</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>      categoryTotals[transaction<span class="op">.</span>category] <span class="op">=</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>          (categoryTotals[transaction<span class="op">.</span>category] <span class="op">??</span> <span class="dv">0</span>) <span class="op">+</span> transaction<span class="op">.</span>amount;</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> categoryTotals;</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Top Categories:</strong></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dt">List</span><span class="op">&lt;</span>MapEntry<span class="op">&lt;</span><span class="dt">String</span><span class="op">,</span> <span class="dt">double</span><span class="op">&gt;&gt;</span> getTopCategories(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Map</span><span class="op">&lt;</span><span class="dt">String</span><span class="op">,</span> <span class="dt">double</span><span class="op">&gt;</span> categoryExpenses<span class="op">,</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> limit<span class="op">,</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">{</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> sorted <span class="op">=</span> categoryExpenses<span class="op">.</span>entries<span class="op">.</span>toList()</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">..</span>sort((a<span class="op">,</span> b) <span class="op">=&gt;</span> b<span class="op">.</span>value<span class="op">.</span>compareTo(a<span class="op">.</span>value));</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> sorted<span class="op">.</span>take(limit)<span class="op">.</span>toList();</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="search-filter-logic">6.10 Search &amp; Filter Logic</h3>
<p><strong>Transaction Search:</strong></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dt">List</span><span class="op">&lt;</span>Transaction<span class="op">&gt;</span> searchTransactions(</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">String</span> query<span class="op">,</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">List</span><span class="op">&lt;</span>Transaction<span class="op">&gt;</span> transactions<span class="op">,</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>) <span class="op">{</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> lowerQuery <span class="op">=</span> query<span class="op">.</span>toLowerCase();</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> transactions<span class="op">.</span>where((t) <span class="op">=&gt;</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    t<span class="op">.</span>title<span class="op">.</span>toLowerCase()<span class="op">.</span>contains(lowerQuery) <span class="op">||</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    t<span class="op">.</span>category<span class="op">.</span>toLowerCase()<span class="op">.</span>contains(lowerQuery) <span class="op">||</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    t<span class="op">.</span>amount<span class="op">.</span>toString()<span class="op">.</span>contains(query)</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  )<span class="op">.</span>toList();</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>Multi-filter:</strong></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dt">List</span><span class="op">&lt;</span>Transaction<span class="op">&gt;</span> filterTransactions(<span class="op">{</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">List</span><span class="op">&lt;</span>Transaction<span class="op">&gt;?</span> transactions<span class="op">,</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">String</span><span class="op">?</span> accountId<span class="op">,</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">String</span><span class="op">?</span> category<span class="op">,</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">List</span><span class="op">&lt;</span><span class="dt">String</span><span class="op">&gt;?</span> tags<span class="op">,</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  DateTime<span class="op">?</span> startDate<span class="op">,</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  DateTime<span class="op">?</span> endDate<span class="op">,</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">bool</span><span class="op">?</span> isExpense<span class="op">,</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>) <span class="op">{</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">var</span> filtered <span class="op">=</span> transactions <span class="op">??</span> allTransactions;</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (accountId <span class="op">!=</span> <span class="cn">null</span>) <span class="op">{</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    filtered <span class="op">=</span> filtered<span class="op">.</span>where((t) <span class="op">=&gt;</span> t<span class="op">.</span>accountId <span class="op">==</span> accountId)<span class="op">.</span>toList();</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (category <span class="op">!=</span> <span class="cn">null</span>) <span class="op">{</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>    filtered <span class="op">=</span> filtered<span class="op">.</span>where((t) <span class="op">=&gt;</span> t<span class="op">.</span>category <span class="op">==</span> category)<span class="op">.</span>toList();</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (tags <span class="op">!=</span> <span class="cn">null</span> <span class="op">&amp;&amp;</span> tags<span class="op">.</span>isNotEmpty) <span class="op">{</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>    filtered <span class="op">=</span> filtered<span class="op">.</span>where((t) <span class="op">=&gt;</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>      t<span class="op">.</span>tags<span class="op">.</span>any((tag) <span class="op">=&gt;</span> tags<span class="op">.</span>contains(tag))</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>    )<span class="op">.</span>toList();</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (startDate <span class="op">!=</span> <span class="cn">null</span>) <span class="op">{</span></span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>    filtered <span class="op">=</span> filtered<span class="op">.</span>where((t) <span class="op">=&gt;</span> t<span class="op">.</span>date<span class="op">.</span>isAfter(startDate))<span class="op">.</span>toList();</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (endDate <span class="op">!=</span> <span class="cn">null</span>) <span class="op">{</span></span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>    filtered <span class="op">=</span> filtered<span class="op">.</span>where((t) <span class="op">=&gt;</span> t<span class="op">.</span>date<span class="op">.</span>isBefore(endDate))<span class="op">.</span>toList();</span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (isExpense <span class="op">!=</span> <span class="cn">null</span>) <span class="op">{</span></span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a>    filtered <span class="op">=</span> filtered<span class="op">.</span>where((t) <span class="op">=&gt;</span> t<span class="op">.</span>isExpense <span class="op">==</span> isExpense)<span class="op">.</span>toList();</span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a>  <span class="kw">return</span> filtered;</span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h2 id="technology-stack">7. Technology Stack</h2>
<h3 id="core-technologies">7.1 Core Technologies</h3>
<table>
<thead>
<tr>
<th>Technology</th>
<th>Version</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Flutter</td>
<td>3.9.2+</td>
<td>Cross-platform framework</td>
</tr>
<tr>
<td>Dart</td>
<td>3.9.2+</td>
<td>Programming language</td>
</tr>
<tr>
<td>SQLite</td>
<td>-</td>
<td>Local database</td>
</tr>
</tbody>
</table>
<h3 id="key-dependencies">7.2 Key Dependencies</h3>
<h4 id="state-management-1"><strong>State Management</strong></h4>
<ul>
<li><strong>provider</strong> (^6.1.5): State management and dependency
injection</li>
</ul>
<h4 id="database"><strong>Database</strong></h4>
<ul>
<li><strong>sqflite</strong> (^2.4.2): SQLite plugin for Flutter</li>
<li><strong>path</strong> (^1.9.1): File path manipulation</li>
</ul>
<h4 id="ui-components"><strong>UI Components</strong></h4>
<ul>
<li><strong>fl_chart</strong> (^1.1.1): Charts and graphs</li>
<li><strong>google_fonts</strong> (^6.3.2): Custom fonts</li>
<li><strong>animate_do</strong> (^4.2.0): Animations</li>
<li><strong>flutter_colorpicker</strong> (^1.1.0): Color selection</li>
<li><strong>table_calendar</strong> (^3.2.0): Calendar widget</li>
<li><strong>animations</strong> (^2.0.11): Advanced animations</li>
</ul>
<h4 id="utilities"><strong>Utilities</strong></h4>
<ul>
<li><strong>intl</strong> (^0.20.2): Internationalization and
formatting</li>
<li><strong>uuid</strong> (^4.5.2): UUID generation</li>
<li><strong>shared_preferences</strong> (^2.5.3): Local key-value
storage</li>
<li><strong>package_info_plus</strong> (^8.1.2): App information</li>
</ul>
<h4 id="features"><strong>Features</strong></h4>
<ul>
<li><strong>pdf</strong> (^3.11.3): PDF generation</li>
<li><strong>printing</strong> (^5.14.2): PDF sharing and printing</li>
<li><strong>path_provider</strong> (^2.1.5): File system paths</li>
<li><strong>flutter_local_notifications</strong> (^18.0.1): Local
notifications</li>
<li><strong>timezone</strong> (^0.9.4): Timezone handling</li>
<li><strong>home_widget</strong> (^0.7.0): Home screen widget</li>
</ul>
<h4 id="development"><strong>Development</strong></h4>
<ul>
<li><strong>flutter_test</strong>: Testing framework</li>
<li><strong>flutter_lints</strong> (^5.0.0): Linting rules</li>
<li><strong>flutter_launcher_icons</strong> (^0.13.1): App icon
generation</li>
<li><strong>mockito</strong> (^5.4.4): Mocking for tests</li>
<li><strong>build_runner</strong> (^2.4.13): Code generation</li>
<li><strong>sqflite_common_ffi</strong> (^2.3.3): SQLite testing</li>
</ul>
<h3 id="platform-specific">7.3 Platform-Specific</h3>
<h4 id="android"><strong>Android</strong></h4>
<ul>
<li>Minimum SDK: 21 (Android 5.0)</li>
<li>Target SDK: 34 (Android 14)</li>
<li>Kotlin support</li>
<li>Home screen widget support</li>
</ul>
<h4 id="ios"><strong>iOS</strong></h4>
<ul>
<li>Minimum iOS: 12.0</li>
<li>Swift support</li>
<li>Widget extension support</li>
</ul>
<hr />
<h2 id="code-structure">8. Code Structure</h2>
<h3 id="project-organization">8.1 Project Organization</h3>
<pre><code>cashflow_app/
├── android/                 # Android-specific code
├── ios/                     # iOS-specific code
├── lib/
│   ├── main.dart           # App entry point
│   ├── models/             # Data models
│   │   ├── account.dart
│   │   ├── budget.dart
│   │   ├── goal.dart
│   │   ├── insight.dart
│   │   ├── notification.dart
│   │   ├── recurring_transaction.dart
│   │   ├── tag.dart
│   │   ├── transaction.dart
│   │   └── user.dart
│   ├── providers/          # State management
│   │   ├── account_provider.dart
│   │   ├── auth_provider.dart
│   │   ├── budget_provider.dart
│   │   ├── goal_provider.dart
│   │   ├── insights_provider.dart
│   │   ├── notification_provider.dart
│   │   ├── recurring_transaction_provider.dart
│   │   ├── tag_provider.dart
│   │   └── transaction_provider.dart
│   ├── screens/            # UI screens (29 screens)
│   │   ├── accounts_screen.dart
│   │   ├── add_account_screen.dart
│   │   ├── add_edit_budget_screen.dart
│   │   ├── add_edit_goal_screen.dart
│   │   ├── add_edit_recurring_transaction_screen.dart
│   │   ├── add_edit_tag_screen.dart
│   │   ├── add_transaction_screen.dart
│   │   ├── add_transaction_screen_multistep.dart
│   │   ├── budgets_screen.dart
│   │   ├── calendar_screen.dart
│   │   ├── dashboard_screen.dart
│   │   ├── edit_account_screen.dart
│   │   ├── faq_screen.dart
│   │   ├── goals_screen.dart
│   │   ├── insights_screen.dart
│   │   ├── intro_screen.dart
│   │   ├── login_screen.dart
│   │   ├── main_screen.dart
│   │   ├── monthly_report_screen.dart
│   │   ├── notifications_screen.dart
│   │   ├── privacy_policy_screen.dart
│   │   ├── profile_screen.dart
│   │   ├── recurring_transactions_screen.dart
│   │   ├── signup_screen.dart
│   │   ├── splash_screen.dart
│   │   ├── stats_screen.dart
│   │   ├── tags_management_screen.dart
│   │   ├── terms_conditions_screen.dart
│   │   └── transactions_screen.dart
│   ├── services/           # Business services
│   │   ├── database_helper.dart
│   │   ├── home_widget_service.dart
│   │   ├── notification_service.dart
│   │   └── pdf_service.dart
│   ├── utils/              # Utility functions
│   │   ├── categories.dart
│   │   ├── colors.dart
│   │   ├── constants.dart
│   │   ├── date_utils.dart
│   │   ├── formatters.dart
│   │   └── validators.dart
│   └── widgets/            # Reusable widgets
│       ├── account_card.dart
│       ├── animated_button.dart
│       ├── category_icon.dart
│       ├── custom_text_field.dart
│       ├── expense_pie_chart.dart
│       ├── fade_in_animation.dart
│       ├── financial_trend_chart.dart
│       ├── glass_card.dart
│       ├── gradient_background.dart
│       ├── income_expense_chart.dart
│       ├── net_worth_bar_chart.dart
│       ├── transaction_card.dart
│       ├── transaction_list_item.dart
│       └── account_breakdown_chart.dart
├── assets/                 # Static assets
│   └── icon/
│       └── app_icon.png
├── test/                   # Unit tests
└── pubspec.yaml           # Dependencies</code></pre>
<h3 id="design-patterns-used">8.2 Design Patterns Used</h3>
<h4 id="singleton-pattern"><strong>Singleton Pattern</strong></h4>
<ul>
<li><code>DatabaseHelper</code>: Single database instance</li>
<li><code>NotificationService</code>: Single notification manager</li>
</ul>
<h4 id="factory-pattern"><strong>Factory Pattern</strong></h4>
<ul>
<li>Model <code>fromMap()</code> methods for object creation</li>
</ul>
<h4 id="observer-pattern"><strong>Observer Pattern</strong></h4>
<ul>
<li>Provider pattern for state management</li>
<li><code>ChangeNotifier</code> for reactive updates</li>
</ul>
<h4 id="repository-pattern"><strong>Repository Pattern</strong></h4>
<ul>
<li>Providers act as repositories</li>
<li>Abstraction over database operations</li>
</ul>
<h4 id="dependency-injection"><strong>Dependency Injection</strong></h4>
<ul>
<li>Provider package for DI</li>
<li>Context-based provider access</li>
</ul>
<h3 id="naming-conventions">8.3 Naming Conventions</h3>
<ul>
<li><strong>Files:</strong> snake_case (e.g.,
<code>add_transaction_screen.dart</code>)</li>
<li><strong>Classes:</strong> PascalCase (e.g.,
<code>TransactionProvider</code>)</li>
<li><strong>Variables:</strong> camelCase (e.g.,
<code>totalIncome</code>)</li>
<li><strong>Constants:</strong> UPPER_SNAKE_CASE (e.g.,
<code>DEFAULT_CURRENCY</code>)</li>
<li><strong>Private members:</strong> _leadingUnderscore (e.g.,
<code>_database</code>)</li>
</ul>
<hr />
<h2 id="testing-strategy">9. Testing Strategy</h2>
<h3 id="unit-tests">9.1 Unit Tests</h3>
<p><strong>Test Coverage:</strong> - Model serialization/deserialization
- Business logic in providers - Utility functions - Calculation
methods</p>
<p><strong>Example Tests:</strong></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">// test/models/account_test.dart</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>test(<span class="st">&#39;Account EMI calculation&#39;</span><span class="op">,</span> () <span class="op">{</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> account <span class="op">=</span> Account(</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    loanPrincipal<span class="op">:</span> <span class="dv">100000</span><span class="op">,</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    loanInterestRate<span class="op">:</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    loanTenureMonths<span class="op">:</span> <span class="dv">12</span><span class="op">,</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    emiAmount<span class="op">:</span> <span class="fl">8791.59</span><span class="op">,</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    emisPaid<span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  expect(account<span class="op">.</span>emisPending<span class="op">,</span> <span class="dv">7</span>);</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  expect(account<span class="op">.</span>remainingLoanBalance<span class="op">,</span> closeTo(<span class="fl">61541.13</span><span class="op">,</span> <span class="fl">0.01</span>));</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>);</span></code></pre></div>
<h3 id="widget-tests">9.2 Widget Tests</h3>
<p><strong>Test Coverage:</strong> - UI component rendering - User
interactions - Form validation - Navigation</p>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode dart"><code class="sourceCode dart"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>testWidgets(<span class="st">&#39;Login form validation&#39;</span><span class="op">,</span> (tester) <span class="at">async</span> <span class="op">{</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">await</span> tester<span class="op">.</span>pumpWidget(MyApp());</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Find widgets</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> usernameField <span class="op">=</span> find<span class="op">.</span>byKey(Key(<span class="st">&#39;username&#39;</span>));</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> passwordField <span class="op">=</span> find<span class="op">.</span>byKey(Key(<span class="st">&#39;password&#39;</span>));</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">final</span> loginButton <span class="op">=</span> find<span class="op">.</span>byKey(Key(<span class="st">&#39;login&#39;</span>));</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Test empty submission</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">await</span> tester<span class="op">.</span>tap(loginButton);</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">await</span> tester<span class="op">.</span>pump();</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  expect(find<span class="op">.</span>text(<span class="st">&#39;Username is required&#39;</span>)<span class="op">,</span> findsOneWidget);</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>);</span></code></pre></div>
<h3 id="integration-tests">9.3 Integration Tests</h3>
<p><strong>Test Scenarios:</strong> - Complete user flows - Database
operations - Provider interactions - Multi-screen navigation</p>
<h3 id="test-files">9.4 Test Files</h3>
<p>Located in <code>test/</code> directory: -
<code>account_provider_test.dart</code> -
<code>auth_provider_test.dart</code> -
<code>budget_provider_test.dart</code> -
<code>database_helper_test.dart</code> -
<code>goal_provider_test.dart</code> -
<code>notification_provider_test.dart</code> -
<code>recurring_transaction_provider_test.dart</code> -
<code>tag_provider_test.dart</code> -
<code>transaction_provider_test.dart</code></p>
<hr />
<h2 id="future-enhancements">10. Future Enhancements</h2>
<h3 id="security-improvements">10.1 Security Improvements</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>Implement password hashing
(bcrypt/argon2)</label></li>
<li><label><input type="checkbox"></input>Add biometric
authentication</label></li>
<li><label><input type="checkbox"></input>Implement database
encryption</label></li>
<li><label><input type="checkbox"></input>Add secure storage for sensitive
data</label></li>
<li><label><input type="checkbox"></input>Implement token-based
authentication</label></li>
</ul>
<h3 id="features-1">10.2 Features</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>Cloud backup and sync</label></li>
<li><label><input type="checkbox"></input>Multi-currency support</label></li>
<li><label><input type="checkbox"></input>Investment portfolio
tracking</label></li>
<li><label><input type="checkbox"></input>Bill reminders</label></li>
<li><label><input type="checkbox"></input>Receipt scanning (OCR)</label></li>
<li><label><input type="checkbox"></input>Bank account
integration</label></li>
<li><label><input type="checkbox"></input>Split transactions</label></li>
<li><label><input type="checkbox"></input>Shared accounts (family
mode)</label></li>
<li><label><input type="checkbox"></input>Custom categories</label></li>
<li><label><input type="checkbox"></input>Advanced reporting (yearly, custom
periods)</label></li>
</ul>
<h3 id="uiux">10.3 UI/UX</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>Dark mode improvements</label></li>
<li><label><input type="checkbox"></input>Customizable themes</label></li>
<li><label><input type="checkbox"></input>Widget customization</label></li>
<li><label><input type="checkbox"></input>Gesture controls</label></li>
<li><label><input type="checkbox"></input>Voice input</label></li>
<li><label><input type="checkbox"></input>Accessibility
improvements</label></li>
</ul>
<h3 id="analytics">10.4 Analytics</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>Spending predictions</label></li>
<li><label><input type="checkbox"></input>Budget recommendations</label></li>
<li><label><input type="checkbox"></input>Financial health score</label></li>
<li><label><input type="checkbox"></input>Trend analysis</label></li>
<li><label><input type="checkbox"></input>Anomaly detection</label></li>
</ul>
<h3 id="platform">10.5 Platform</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>Web version</label></li>
<li><label><input type="checkbox"></input>Desktop apps (Windows, macOS,
Linux)</label></li>
<li><label><input type="checkbox"></input>Wear OS support</label></li>
<li><label><input type="checkbox"></input>Apple Watch support</label></li>
<li><label><input type="checkbox"></input>iPad optimization</label></li>
</ul>
<h3 id="technical">10.6 Technical</h3>
<ul class="task-list">
<li><label><input type="checkbox"></input>Migration to Riverpod</label></li>
<li><label><input type="checkbox"></input>GraphQL API</label></li>
<li><label><input type="checkbox"></input>Offline-first
architecture</label></li>
<li><label><input type="checkbox"></input>Performance
optimization</label></li>
<li><label><input type="checkbox"></input>Code coverage &gt; 80%</label></li>
<li><label><input type="checkbox"></input>CI/CD pipeline</label></li>
</ul>
<hr />
<h2 id="appendix">Appendix</h2>
<h3 id="a.-glossary">A. Glossary</h3>
<ul>
<li><strong>EMI:</strong> Equated Monthly Installment</li>
<li><strong>Net Worth:</strong> Total assets minus total
liabilities</li>
<li><strong>Provider:</strong> State management pattern in Flutter</li>
<li><strong>Sqflite:</strong> SQLite plugin for Flutter</li>
<li><strong>UUID:</strong> Universally Unique Identifier</li>
</ul>
<h3 id="b.-references">B. References</h3>
<ul>
<li><a href="https://flutter.dev/docs">Flutter Documentation</a></li>
<li><a href="https://pub.dev/packages/provider">Provider
Package</a></li>
<li><a href="https://pub.dev/packages/sqflite">Sqflite Package</a></li>
<li><a href="https://pub.dev/packages/fl_chart">FL Chart
Documentation</a></li>
</ul>
<h3 id="c.-contact-support">C. Contact &amp; Support</h3>
<p>For technical queries or contributions, please refer to the project
repository.</p>
<hr />
<p><strong>Document Version:</strong> 1.0<br />
<strong>Last Updated:</strong> November 2025<br />
<strong>Prepared By:</strong> CashFlow Development Team</p>
</body>
</html>
